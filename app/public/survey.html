<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Servey</title>
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"> -->
  <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  <script src="https://code.jquery.com/jquery.js"></script>
  <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script> -->
  <link rel="stylesheet" href="style.css">
  <!-- I was getting an error for favicon.ico and this fixes it... idk why -->
  <link rel="shortcut icon" href="#" />
</head>

<body>
  <div class="question">
    Your dream job at Dunder Mifflin would be?
  </div>
  <input type="radio" name="Q1" value="1" checked="checked">
  <span>Manager</span>
  <br>
  <input type="radio" name="Q1" value="2">
  <span>Sales</span>
  <br>
  <input type="radio" name="Q1" value="3">
  <span>Accounting </span>
  <br>
  <input type="radio" name="Q1" value="4">
  <span>Human Resources</span>

  <div class="question">
    How much do you like Pineapple?
  </div>
  <input type="radio" name="Q2" value="1" checked="checked">
  <span>Not at all</span>
  <br>
  <input type="radio" name="Q2" value="2">
  <span>It's fine</span>
  <br>
  <input type="radio" name="Q2" value="3">
  <span>Good</span>
  <br>
  <input type="radio" name="Q2" value="4">
  <span>Love it</span>

  <div class="question">
    What kind of animal person are you?
  </div>
  <input type="radio" name="Q3" value="1" checked="checked">
  <span>Cat</span>
  <br>
  <input type="radio" name="Q3" value="2">
  <span>Dog</span>
  <br>
  <input type="radio" name="Q3" value="3">
  <span>Bear</span>
  <br>
  <input type="radio" name="Q3" value="4">
  <span>Owl</span>

  <div class="question">
    Favorite food category?
  </div>
  <input type="radio" name="Q4" value="1" checked="checked">
  <span>American</span>
  <br>
  <input type="radio" name="Q4" value="2">
  <span>Mexican</span>
  <br>
  <input type="radio" name="Q4" value="3">
  <span>Asian</span>
  <br>
  <input type="radio" name="Q4" value="4">
  <span>Italian</span>

  <div class="question">
    Do you like taking quizes?
  </div>
  <input type="radio" name="Q5" value="1" checked="checked">
  <span>Leave me alone</span>
  <br>
  <input type="radio" name="Q5" value="2">
  <span>No</span>
  <br>
  <input type="radio" name="Q5" value="3">
  <span>Yes</span>
  <br>
  <input type="radio" name="Q5" value="4">
  <span>Dosen't matter to me</span>

  <div class="question">
    Favorite color?
  </div>
  <input type="radio" name="Q6" value="1" checked="checked">
  <span>Green</span>
  <br>
  <input type="radio" name="Q6" value="2">
  <span>Blue</span>
  <br>
  <input type="radio" name="Q6" value="3">
  <span>Yellow</span>
  <br>
  <input type="radio" name="Q6" value="4">
  <span>Red</span>

  <div class="question">
    How creative of a person are you?
  </div>
  <input type="radio" name="Q7" value="1" checked="checked">
  <span>Creative like this quiz...</span>
  <br>
  <input type="radio" name="Q7" value="2">
  <span>I can draw stick figures</span>
  <br>
  <input type="radio" name="Q7" value="3">
  <span>I regularly draw</span>
  <br>
  <input type="radio" name="Q7" value="4">
  <span>Yep</span>

  <div class="question">
    How much do you really like Pineapple?
  </div>
  <input type="radio" name="Q8" value="1" checked="checked">
  <span>nope</span>
  <br>
  <input type="radio" name="Q8" value="2">
  <span>it's alright</span>
  <br>
  <input type="radio" name="Q8" value="3">
  <span>good</span>
  <br>
  <input type="radio" name="Q8" value="4">
  <span>OMG AMAZING</span>

  <div class="question">
    The best instructor at our bootcamp is?
  </div>
  <input type="radio" name="Q9" value="1" checked="checked">
  <span>Jacob</span>
  <br>
  <input type="radio" name="Q9" value="2">
  <span>Steffen</span>
  <br>
  <input type="radio" name="Q9" value="3">
  <span>Peter</span>
  <br>
  <input type="radio" name="Q9" value="4">
  <span>James</span>

  <div class="question">
    Favorite hobby?
  </div>
  <input type="radio" name="Q10" value="1" checked="checked">
  <span>Reading</span>
  <br>
  <input type="radio" name="Q10" value="2">
  <span>Full stack development</span>
  <br>
  <input type="radio" name="Q10" value="3">
  <span>Gaming</span>
  <br>
  <input type="radio" name="Q10" value="4">
  <span>Working out</span>


  <br>
  <input class="submit" type="submit" name="submit" value="submit">


  <!-- From W3 schools -->
  <!-- The Modal -->
  <div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <span class="close">&times;</span>
    </div>

  </div>


  <!-- <div class="wrapper">
    <img src="https://upload.wikimedia.org/wikipedia/en/c/cd/Dwight_Schrute.jpg" alt="">
    <p class = "popupName">Dwight Schrute</p>
    <p class = "popupScore">10</p>
  </div> -->


</body>

<script type="text/javascript">
  let modal = document.querySelector("#myModal");
  let appendTo = document.querySelector('.modal-content');
  let closeBtn = document.querySelector(".close");

  $('.submit').on('click', function(event) {
    event.preventDefault();
    // const questions = document.getElementsByName("Q1");
    const dataToPOST = {
      data: []
    };

    for (let i = 1; i <= 10; i++) {
      let questions = document.getElementsByName("Q" + i);
      // console.log(questions);
      // console.log(questions.length);
      for (let j = 0; j < questions.length; j++) {
        // console.log("ran")
        if (questions[j].checked === true) {
          dataToPOST.data.push(questions[j].value);
        } // end if
      } //end j forloop
    } //end i forloop
    console.log("data to send to server: ")
    console.log(dataToPOST);

    $.post("/api/friends", dataToPOST)
      .then(function(data) {
        // let popupModel = document.createElement("div");

        modal.style.display = "block";

        console.log(data);
        console.log(data[0]);
        console.log(data[0].friend);
        console.log(data[0].friend.photo);

        for(let i = 0; i < data.length; i++){
          let container = document.createElement('div');
          container.setAttribute("class", "container");

          let wrapper = document.createElement("div");
          wrapper.setAttribute("class", "wrapper");

          let image = document.createElement('img');
          image.setAttribute("class", "popupImage");
          image.setAttribute("src", data[i].friend.photo);
          image.setAttribute('alt', "MISSING IMAGE AUSHDUAHSDUIASUD");
          wrapper.appendChild(image);

          let name = document.createElement('p');
          name.setAttribute('class', 'popupName');
          name.innerHTML = "Name: " + data[i].friend.name;
          wrapper.appendChild(name);

          let score = document.createElement('p');
          score.setAttribute('class', 'popupScore');
          score.innerHTML = 'Difference: ' + data[i].differenceVal;

          wrapper.appendChild(score);


          container.appendChild(wrapper);
          appendTo.appendChild(container);
        }


      })
  }) // end submit quiz

  closeBtn.onclick = function() {
    modal.style.display = "none";
    while (document.querySelector(".modal-content").firstChild) {
          document.querySelector(".modal-content").removeChild(document.querySelector(".modal-content").firstChild);
        }
  }

  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
      while (document.querySelector(".modal-content").firstChild) {
            document.querySelector(".modal-content").removeChild(document.querySelector(".modal-content").firstChild);
          }
    }
  }
</script>

</html>
